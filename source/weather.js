window.onload = function () { getCity(); const body = document.body; const hour = new Date().getHours(); if (hour >= 6 && hour < 18) { body.style.backgroundColor = 'lightblue'; body.style.backgroundImage = 'url(https://512pixels.net/wp-content/uploads/2025/06/11-0-Day-thumbnail.jpg)'; body.style.color = 'black'; } else { body.style.backgroundColor = 'darkblue'; body.style.backgroundImage = 'url(https://512pixels.net/wp-content/uploads/2025/06/11-0-Night-thumbnail.jpg)'; body.style.color = 'white'; } const cityInput = document.getElementById('city'); cityInput.addEventListener('keypress', function (event) { if (event.key === 'Enter') { event.preventDefault(); getWeather(); } }); const date = new Date(); const option = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' }; document.getElementById('currentDate').innerHTML = date.toLocaleDateString('en-US', option); const options = { weekday: 'long' }; date.setDate(date.getDate() + 1); document.getElementById('date1').innerHTML = date.toLocaleDateString('en-US', options); date.setDate(date.getDate() + 1); document.getElementById('date2').innerHTML = date.toLocaleDateString('en-US', options); date.setDate(date.getDate() + 1); document.getElementById('date3').innerHTML = date.toLocaleDateString('en-US', options); const celsiusRadio = document.getElementById('celsius'); const fahrenheitRadio = document.getElementById('fahrenheit'); celsiusRadio.addEventListener('change', function () { if (celsiusRadio.checked) { const forecastDays = document.querySelectorAll('.day p'); const temp = document.getElementById('temperature').innerHTML; const tempValue = parseFloat(temp.replace(/[^\d.-]/g, '')); forecastDays.forEach(day => { if (day.innerHTML.includes('°F')) { const dayTemp = day.innerHTML.replace('°F', '°C'); const dayTempValue = parseFloat(dayTemp.replace(/[^\d.-]/g, '')); const celsiusValue = ((dayTempValue - 32) * 5 / 9).toFixed(0); if (celsiusValue == 'NaN'){ day.innerHTML = 'No data'; } else{ day.innerHTML = celsiusValue + '°C'; } } }); const celsiusValue = ((tempValue - 32) * 5 / 9).toFixed(0); document.getElementById('temperature').innerHTML = celsiusValue + '°C'; } }); fahrenheitRadio.addEventListener('change', function () { if (fahrenheitRadio.checked) { const forecastDays = document.querySelectorAll('.day p'); const temp = document.getElementById('temperature').innerHTML; const tempValue = parseFloat(temp.replace(/[^\d.-]/g, '')); forecastDays.forEach(day => { if (day.innerHTML.includes('°C')) { const dayTemp = day.innerHTML.replace('°C', '°F'); const dayTempValue = parseFloat(dayTemp.replace(/[^\d.-]/g, '')); const fahrenheitValue = ((dayTempValue * 9 / 5) + 32).toFixed(1); if (fahrenheitValue == 'NaN'){ day.innerHTML = 'No data'; } else{ day.innerHTML = fahrenheitValue + '°F'; } } }); const fahrenheitValue = ((tempValue * 9 / 5) + 32).toFixed(1); document.getElementById('temperature').innerHTML = fahrenheitValue + '°F'; } }); }; function getCity() { const cityInput = document.getElementById('city'); cityInput.placeholder = 'Locating your city...'; fetch('https://get.geojs.io/v1/ip/geo.json') .then(response => { if (!response.ok) { throw new Error('Network error: ' + response.statusText); } return response.json(); }) .then(data => { document.getElementById('city').value = `${data.city}`; cityInput.placeholder = 'Enter city name'; getWeather(); }) .catch(error => { console.error('There has been a problem with the fetch operation:', error); document.getElementById('city').value = 'Unknown'; }); } function getWeather() { const cityRaw = document.getElementById('city').value; const city = cityRaw.normalize("NFD").replace(/[\u0300-\u036f]/g, ""); if (!city) { document.getElementById('weatherResult').innerHTML = '<p>Please enter a city name.</p>'; return; } document.getElementById('weatherResult').innerHTML = ''; const temperature = document.getElementById('temperature'); const description = document.getElementById('description'); const errorImage = document.getElementById('error'); const cityName = document.getElementById('cityName'); const wind = document.getElementById('wind'); const day1 = document.getElementById('day1'); const day2 = document.getElementById('day2'); const day3 = document.getElementById('day3'); const celsiusRadio = document.getElementById('celsius'); const fahrenheitRadio = document.getElementById('fahrenheit'); cityName.innerHTML = 'Loading...'; temperature.innerHTML = 'Loading...'; description.innerHTML = 'Loading...'; wind.innerHTML = 'Loading...'; day1.querySelectorAll('p')[0].innerHTML = 'Loading...'; day1.querySelectorAll('p')[1].innerHTML = 'Loading...'; day2.querySelectorAll('p')[0].innerHTML = 'Loading...'; day2.querySelectorAll('p')[1].innerHTML = 'Loading...'; day3.querySelectorAll('p')[0].innerHTML = 'Loading...'; day3.querySelectorAll('p')[1].innerHTML = 'Loading...'; errorImage.src = ''; fetch('https://goweather.xyz/weather/' + city) .then(response => { if (!response.ok) { throw new Error('Network error or the city does not exist.'); } return response.json(); }) .then(data => { if (data.forecast && Array.isArray(data.forecast)) { data.forecast.forEach(f => { if (f.temperature) { f.temperature = f.temperature.replace(/[^\d]/g, ''); if (fahrenheitRadio.checked) { f.temperature = ((parseFloat(f.temperature) * 9 / 5) + 32).toFixed(1); if (f.temperature == 'NaN'){ f.temperature = 'No data'; } else{ f.temperature += '°F'; } } else { if (f.temperature == ''){ f.temperature = 'No data'; } else{ f.temperature += '°C'; } } } }); } const newTemperature = data.temperature ? data.temperature.replace(/[^\d]/g, '') : ''; if (newTemperature >= 40) { temperature.style.color = 'red'; temperature.title = 'Extreme heat warning'; } else if (newTemperature <= 0) { temperature.style.color = 'blue'; temperature.title = 'Extreme cold warning'; } else { temperature.title = 'Common temperature'; temperature.style.color = 'unset'; } if (fahrenheitRadio.checked) { const fahrenheitValue = ((parseFloat(newTemperature) * 9 / 5) + 32); temperature.innerHTML = fahrenheitValue + '°F'; } else { temperature.innerHTML = newTemperature + '°C'; } description.innerHTML = data.description; wind.innerHTML = data.wind; const forecast = data.forecast || []; document.getElementById('day1').querySelectorAll('p')[0].innerHTML = forecast[0] ? forecast[0].temperature : 'N/A'; document.getElementById('day1').querySelectorAll('p')[1].innerHTML = forecast[0] ? forecast[0].wind : 'N/A'; document.getElementById('day2').querySelectorAll('p')[0].innerHTML = forecast[1] ? forecast[1].temperature : 'N/A'; document.getElementById('day2').querySelectorAll('p')[1].innerHTML = forecast[1] ? forecast[1].wind : 'N/A'; document.getElementById('day3').querySelectorAll('p')[0].innerHTML = forecast[2] ? forecast[2].temperature : 'N/A'; document.getElementById('day3').querySelectorAll('p')[1].innerHTML = forecast[2] ? forecast[2].wind : 'N/A'; cityName.innerHTML = cityRaw; }) .catch(error => { console.error('There has been a problem with the fetch operation:', error); document.getElementById('weatherResult').innerHTML = `<p>Error: ${error.message}</p>`; errorImage.src = 'https://cdn.glitch.global/a47efbd7-1b46-4064-882a-5ea5511e81ad/error'; cityName.innerHTML = 'City not found'; temperature.innerHTML = 'No data'; description.innerHTML = 'No data'; wind.innerHTML = 'No data'; day1.querySelectorAll('p')[0].innerHTML = 'No data'; day1.querySelectorAll('p')[1].innerHTML = 'No data'; day2.querySelectorAll('p')[0].innerHTML = 'No data'; day2.querySelectorAll('p')[1].innerHTML = 'No data'; day3.querySelectorAll('p')[0].innerHTML = 'No data'; day3.querySelectorAll('p')[1].innerHTML = 'No data'; }); }